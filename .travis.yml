language: node_js
node_js:
  - '0.10'
before_install:
  - npm install -g npm
  - npm install -g bower
  - bower install
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
script:
  - npm run build
  - npm run test-once
after_script:
  - cat ./coverage/PhantomJS*/lcov.info | ./node_modules/codeclimate-test-reporter/bin/codeclimate.js
after_success:
  - npm install -g firebase-tools
  - if [[ "$TRAVIS_PULL_REQUEST" == "false" ]] && [[ "$TRAVIS_BRANCH" == "master" ]]; then firebase deploy; fi
env:
  global:
    - secure: "QtRuOwITpQqc2nHt0EsBi4ZWo/25NnPaHWJFefJLEJHoYuDL1FjltY7rlk8ObXNgA6jkrg7tYIcbja1tBiXiD3CzoqStm43ZRbHzuQ21oKJgu1HKEof4wvuRzMedR3YJAadgJfXniNBY5+/+13ga3zod5/mYmi4TYhZIwDIvku4="
    - secure: "j5jE4PIeiEqouFE0VJf97IFzPfLjv4Zvmnll/4qLtEtMBbQHNU88W6qmnvt/Rr8+Em4uVHGgGkq2pcuy0imA44P+DUl4GwHOcRT3xwdTBkEM1fdB6L1TVqG/6fqQJ/P8VuWBAO3/9l2DvRY3mswblZDwW0t+R4BdVnxkIxCLYz4="
    - secure: "EaF3hNVzzZ9HrFP/RRUDrWGf8vUByF69s/0z1gOvLxy8bCg96Ma3waSjZYFqyS3eOo/ewsYI1D6g9HPPreoB9iKLTninGFikKVP0aOU/B1m+8KzhoQvf8voLVzaqVM9l6Ykt3cv5MfUejiqdXylyWSDAoze7iZvll8FdHBE8UWM="
